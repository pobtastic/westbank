<!DOCTYPE html>
<html>
<head>
<title>West Bank: Routine at C300</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../westbank.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="C2E0.html">C2E0</a>
</td>
<td class="up">Up: <a href="../maps/all.html#c300">Map</a></td>
<td class="next">
Next: <a href="C3BB.html">C3BB</a>
</td>
</tr>
</table>
<div class="description">C300: Draw Playfield</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="CC3A.html">Draw_PlayWithDoors</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="c300"></span>
<div class="comments">
<div class="paragraph">
<table class="default">
<tr>
<th colspan="1" rowspan="1">Playfield Output</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><img alt="playfield" src="../images/play_area/playfield.png" /></td>
</tr>
</table>
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Draw_Playfield</td>
<td class="address-2"><span id="c300"></span>C300</td>
<td class="instruction">LD L,(IX+$00)</td>
<td class="comment-1" rowspan="3">Set <a href="D5E6.html">Copy_Routine</a> as the destination address at <a href="C300.html#c3b7">Alias_Copy_Routine</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c303"></span>C303</td>
<td class="instruction">LD H,(IX+$01)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c306"></span>C306</td>
<td class="instruction">LD ($C3B8),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c309"></span>C309</td>
<td class="instruction">LD HL,$4000</td>
<td class="comment-1" rowspan="5">Clears the screen buffer by writing $00 to all 6912 memory locations.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c30c"></span>C30C</td>
<td class="instruction">LD DE,$4001</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c30f"></span>C30F</td>
<td class="instruction">LD BC,$1AFF</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c312"></span>C312</td>
<td class="instruction">LD (HL),$00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c314"></span>C314</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="c316"></span>
<div class="comments">
<div class="paragraph">
Draws the numbering of the deposit boxes on the left and right of the screen.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c316"></span>C316</td>
<td class="instruction">LD HL,$4001</td>
<td class="comment-1" rowspan="4">Points <span class="register">HL</span> to $4001 (screen buffer) and <span class="register">DE</span> to <a href="DFA0.html">SlotNumbers_Left</a>, then calls the routine at <a href="C300.html#c3b7">Alias_Copy_Routine</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c319"></span>C319</td>
<td class="instruction">LD DE,$DFA0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c31c"></span>C31C</td>
<td class="instruction">LD BC,$080C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c31f"></span>C31F</td>
<td class="instruction">CALL <a href="C300.html#c3b7">Alias_Copy_Routine</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c322"></span>C322</td>
<td class="instruction">LD HL,$4013</td>
<td class="comment-1" rowspan="4">Points <span class="register">HL</span> to $4013 (screen buffer) and <span class="register">DE</span> to <a href="DFA0.html#e000">SlotNumbers_Right</a>, then calls the routine at <a href="C300.html#c3b7">Alias_Copy_Routine</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c325"></span>C325</td>
<td class="instruction">LD DE,$E000</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c328"></span>C328</td>
<td class="instruction">LD BC,$080C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c32b"></span>C32B</td>
<td class="instruction">CALL <a href="C300.html#c3b7">Alias_Copy_Routine</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="c32e"></span>
<div class="comments">
<div class="paragraph">
Draws the centrepiece "till" image.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c32e"></span>C32E</td>
<td class="instruction">LD HL,$400E</td>
<td class="comment-1" rowspan="5">Points <span class="register">HL</span> to $400E (screen buffer) and <span class="register">DE</span> to <a href="E060.html">Centrepiece</a>, then calls the routine at <a href="C300.html#c3b7">Alias_Copy_Routine</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c331"></span>C331</td>
<td class="instruction">LD DE,$E060</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c334"></span>C334</td>
<td class="instruction">LD B,$18</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c336"></span>C336</td>
<td class="instruction">LD C,$04</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c338"></span>C338</td>
<td class="instruction">CALL <a href="C300.html#c3b7">Alias_Copy_Routine</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="c33b"></span>
<div class="comments">
<div class="paragraph">
Draws the game play area (doors and wall sections).
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c33b"></span>C33B</td>
<td class="instruction">LD HL,$4060</td>
<td class="comment-1" rowspan="4">Points <span class="register">HL</span> to $4060 (screen buffer) and <span class="register">DE</span> to <a href="E0C0.html">DoorsTop</a>, then calls the routine at <a href="C300.html#c3b7">Alias_Copy_Routine</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c33e"></span>C33E</td>
<td class="instruction">LD DE,$E0C0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c341"></span>C341</td>
<td class="instruction">LD BC,$0820</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c344"></span>C344</td>
<td class="instruction">CALL <a href="C300.html#c3b7">Alias_Copy_Routine</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c347"></span>C347</td>
<td class="instruction">LD HL,$4080</td>
<td class="comment-1" rowspan="5">Points <span class="register">HL</span> to $4080 (screen buffer) and <span class="register">DE</span> to <a href="E1C0.html">WallLeft</a>, then calls the routine at <a href="C300.html#c3b7">Alias_Copy_Routine</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c34a"></span>C34A</td>
<td class="instruction">LD DE,$E1C0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c34d"></span>C34D</td>
<td class="instruction">LD B,$58</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c34f"></span>C34F</td>
<td class="instruction">LD C,$02</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c351"></span>C351</td>
<td class="instruction">CALL <a href="C300.html#c3b7">Alias_Copy_Routine</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c354"></span>C354</td>
<td class="instruction">LD HL,$4089</td>
<td class="comment-1" rowspan="5">Points <span class="register">HL</span> to $4089 (screen buffer) and <span class="register">DE</span> to <a href="E270.html">WallMiddle</a>, then calls the routine at <a href="C300.html#c3b7">Alias_Copy_Routine</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c357"></span>C357</td>
<td class="instruction">LD DE,$E270</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c35a"></span>C35A</td>
<td class="instruction">LD B,$58</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c35c"></span>C35C</td>
<td class="instruction">LD C,$04</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c35e"></span>C35E</td>
<td class="instruction">CALL <a href="C300.html#c3b7">Alias_Copy_Routine</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c361"></span>C361</td>
<td class="instruction">LD HL,$4094</td>
<td class="comment-1" rowspan="5">Points <span class="register">HL</span> to $4094 (screen buffer) and <span class="register">DE</span> to <a href="E270.html">WallMiddle</a>, then calls the routine at <a href="C300.html#c3b7">Alias_Copy_Routine</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c364"></span>C364</td>
<td class="instruction">LD DE,$E270</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c367"></span>C367</td>
<td class="instruction">LD B,$58</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c369"></span>C369</td>
<td class="instruction">LD C,$04</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c36b"></span>C36B</td>
<td class="instruction">CALL <a href="C300.html#c3b7">Alias_Copy_Routine</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c36e"></span>C36E</td>
<td class="instruction">LD HL,$409F</td>
<td class="comment-1" rowspan="5">Points <span class="register">HL</span> to $409F (screen buffer) and <span class="register">DE</span> to <a href="E3D0.html">DoorFrame_Side</a>, then calls the routine at <a href="C300.html#c3b7">Alias_Copy_Routine</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c371"></span>C371</td>
<td class="instruction">LD DE,$E3D0</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c374"></span>C374</td>
<td class="instruction">LD B,$58</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c376"></span>C376</td>
<td class="instruction">LD C,$01</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c378"></span>C378</td>
<td class="instruction">CALL <a href="C300.html#c3b7">Alias_Copy_Routine</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c37b"></span>C37B</td>
<td class="instruction">LD HL,$48E0</td>
<td class="comment-1" rowspan="4">Points <span class="register">HL</span> to $48E0 (screen buffer) and <span class="register">DE</span> to <a href="E428.html">DoorBottom</a>, then calls the routine at <a href="C300.html#c3b7">Alias_Copy_Routine</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c37e"></span>C37E</td>
<td class="instruction">LD DE,$E428</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c381"></span>C381</td>
<td class="instruction">LD BC,$0820</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c384"></span>C384</td>
<td class="instruction">CALL <a href="C300.html#c3b7">Alias_Copy_Routine</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="c387"></span>
<div class="comments">
<div class="paragraph">
Draws the Bank Teller desks.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c387"></span>C387</td>
<td class="instruction">LD HL,$5020</td>
<td class="comment-1" rowspan="4">Points <span class="register">HL</span> to $5020 (screen buffer) and <span class="register">DE</span> to <a href="E528.html">Tellers</a>, then calls the routine at <a href="C300.html#c3b7">Alias_Copy_Routine</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c38a"></span>C38A</td>
<td class="instruction">LD DE,$E528</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c38d"></span>C38D</td>
<td class="instruction">LD BC,$2020</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c390"></span>C390</td>
<td class="instruction">CALL <a href="C300.html#c3b7">Alias_Copy_Routine</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="c393"></span>
<div class="comments">
<div class="paragraph">
Writes the "SCORE" and "LIVES" labels (these aren't text, they're images).
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c393"></span>C393</td>
<td class="instruction">LD HL,$50C1</td>
<td class="comment-1" rowspan="4">Points <span class="register">HL</span> to $50C1 (screen buffer) and <span class="register">DE</span> to <a href="E928.html">Score_Text_Image</a>, then calls the routine at <a href="C300.html#c3b7">Alias_Copy_Routine</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c396"></span>C396</td>
<td class="instruction">LD DE,$E928</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c399"></span>C399</td>
<td class="instruction">LD BC,$1006</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c39c"></span>C39C</td>
<td class="instruction">CALL <a href="C300.html#c3b7">Alias_Copy_Routine</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c39f"></span>C39F</td>
<td class="instruction">LD HL,$50B0</td>
<td class="comment-1" rowspan="4">Points <span class="register">HL</span> to $50B0 (screen buffer) and <span class="register">DE</span> to <a href="E988.html">Lives_Text_Image</a>, then calls the routine at <a href="C300.html#c3b7">Alias_Copy_Routine</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c3a2"></span>C3A2</td>
<td class="instruction">LD DE,$E988</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c3a5"></span>C3A5</td>
<td class="instruction">LD BC,$1606</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c3a8"></span>C3A8</td>
<td class="instruction">CALL <a href="C300.html#c3b7">Alias_Copy_Routine</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="c3ab"></span>
<div class="comments">
<div class="paragraph">
Copies attribute data to the screen.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c3ab"></span>C3AB</td>
<td class="instruction">LD HL,$ED00</td>
<td class="comment-1" rowspan="4">Copies $300 bytes of attribute data from <a href="ED00.html">ED00</a> to $5800.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c3ae"></span>C3AE</td>
<td class="instruction">LD DE,$5800</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c3b1"></span>C3B1</td>
<td class="instruction">LD BC,$0300</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c3b4"></span>C3B4</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c3b6"></span>C3B6</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="c3b7"></span>
<div class="comments">
<div class="paragraph">
An alias which just calls the normal <a href="D5E6.html">Copy_Routine</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Alias_Copy_Routine</td>
<td class="address-2"><span id="c3b7"></span>C3B7</td>
<td class="instruction">CALL <a href="D5E6.html">Copy_Routine</a></td>
<td class="comment-1" rowspan="1">Draws the image pointed to in <span class="register">DE</span> to the screen location in <span class="register">HL</span> using the dimensions in <span class="register">BC</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="c3ba"></span>C3BA</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="C2E0.html">C2E0</a>
</td>
<td class="up">Up: <a href="../maps/all.html#c300">Map</a></td>
<td class="next">
Next: <a href="C3BB.html">C3BB</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; DINAMIC SOFTWARE 1985 &copy; 2023 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.10.</div>
<div><a href="../dec/asm/49920.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>